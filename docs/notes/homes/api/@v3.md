---
title: 全局API@3.x
createTime: 2025/01/15 10:03:30
permalink: /homes/api/@v3/
---

### $DialogForm 弹窗表单

:::tip

- 可以直接弹框 Form 表单[在线例子](/default/dialog-form)
- 更多 Form 配置属性可以参考[From 组件文档](/form/form)
- 新增 close 主动关闭方法
  ::::

```javascript
import { getCurrentInstance } from "vue";
import { $DialogForm } from "@zhaoyifannan/tvue";
const { appContext } = getCurrentInstance();
const ops = {
  option: {
    submitText: "完成",
    column: [
      {
        label: "姓名",
        prop: "name",
        span: 24,
        rules: [
          {
            required: true,
            message: "请输入姓名",
            trigger: "blur",
          },
        ],
      },
    ],
  },
};
//用法 1
appContext.config.globalProperties.$DialogForm(ops);
//用法 2
$DialogForm(appContext)(ops);
//关闭
$DialogForm(appContext)(ops).lose();
```

### $Clipboard 复制到剪切板

> 可以赋值任意文本到剪切板[在线例子](/default/clipboard)

```javascript
import { $Clipboard } from "@zhaoyifannan/tvue";
$Clipboard({
  text: "复制的文本内容",
})
  .then(() => {
    this.$message.success("复制成功");
  })
  .catch(() => {
    this.$message.error("复制失败");
  });
```

### $ImagePreview 图片预览

> 可以赋值任赋值图片去放大预览(一张缩略图，一张放大图)[在线例子](/default/image-preview)

```javascript
import { getCurrentInstance } from "vue";
import { $ImagePreview } from "@zhaoyifannan/tvue";
const { appContext } = getCurrentInstance();
var link = "https://lokeshdhakar.com/projects/lightbox2/images/";
let datas = [
  { thumbUrl: `${link}thumb-4.jpg`, url: `${link}image-4.jpg` },
  { thumbUrl: `${link}thumb-5.jpg`, url: `${link}image-5.jpg` },
  { thumbUrl: `${link}thumb-6.jpg`, url: `${link}image-6.jpg` },
];
$ImagePreview(appContext)(datas, 0);
```

### $Print 打印插件

> 可以传入 dom 的 id 或者 class[在线例子](/default/print)

```javascript
import { $Print } from "@zhaoyifannan/tvue";
<div id="test"></div>;
Print("#test");
```

### $Export excel 导出

> 传入相关的属性配置[在线例子](/default/export)

```javascript
import { $Export } from "@zhaoyifannan/tvue";
let opt = {
  title: "文档标题",
  column: [
    {
      label: "标题",
      prop: "title",
    },
  ],
  data: [
    {
      title: "测试数据1",
    },
    {
      title: "测试数据2",
    },
  ],
};
$Export.excel({
  title: opt.title || new Date().getTime(),
  columns: opt.column,
  data: opt.data,
});
```

### $Log 日志打印

> 可以打印不同颜色和标注的日志

```javascript
import { $Log } from "@zhaoyifannan/tvue";
/**
 * 内置5中常用颜色,默认为primary
 * default:#35495E
 * primary:#3488ff
 * success:#43B883
 * warning:#e6a23c
 * danger:#f56c6c
 * 也可以直接打印彩色文字
 */

$Log.capsule("标题", "内容", "primary");
$Log.primary("内容");
```

### findObject 发现结构对象

```javascript
import { findObject } from "@zhaoyifannan/tvue";
var option = { column: [] };
var prop = findObject(option.column, "prop");
console.log(prop); //操作对象
```

### downFile 文件下载

```javascript
import { downFile } from "@zhaoyifannan/tvue";
var url = "https://avuejs.com/images/logo-bg.jpg";
downFile(url, "logo.jpg");
```

### randomId 随机数生成

```javascript
import { randomId } from "@zhaoyifannan/tvue";
var str = randomId();
console.log(str);
```

### loadScript 动态加载 js/css

```javascript
import { loadScript } from "@zhaoyifannan/tvue";
loadScript("js", "xxx.js").then(() => {
  //执行后的方法
});
loadScript("css", "xxx.css").then(() => {
  //执行后的方法
});
```

### deepClone 对象深拷贝

```javascript
import { deepClone } from "@zhaoyifannan/tvue";
var obj1 = {
  name: "张三",
};
var obj2 = deepClone(obj1);
```

### setPx 设置 css 像素方法

> 如果传入是数字默认加 px 属性

```javascript
import { setPx } from "@zhaoyifannan/tvue";
var obj = 23;
console.log(setPx(obj)); //'23px'
console.log(setPx("100%")); //'100%'
console.log(setPx("23px")); //'23px'
```

### validatenull 判断空

> 可以判断对象、数组、字符串是否为空

```javascript
import { validatenull } from "@zhaoyifannan/tvue";
var obj1 = {};
var obj2 = [];
var str1 = "";
var str2 = undefined;
var str3 = null;
console.log(validatenull(obj1)); //true
console.log(validatenull(obj2)); //true
console.log(validatenull(str1)); //true
console.log(validatenull(str2)); //true
console.log(validatenull(str3)); //true
```

### findNode 数组中寻找对象下

> 根据对象属性在数组中寻找返回符合的对象

```javascript
import { findNode } from "@zhaoyifannan/tvue";
var list = [
  {
    prop: "name",
  },
  {
    prop: "sex",
  },
];
var obj = findNode(list, "sex", "prop");
console.log(obj); //{prop:'sex'}
```

### findArray 数组中寻找对象下标

> 根据对象属性在数组中寻找返回符合的数组下标

```javascript
import { findArray } from "@zhaoyifannan/tvue";
var list = [
  {
    prop: "name",
  },
  {
    prop: "sex",
  },
];
var index = findArray(list, "sex", "prop");
console.log(index); //1
```

### validData 验证对象

> 验证是否为空的任何类型数据,为空择取默认的设置值

```javascript
import { validData } from "@zhaoyifannan/tvue";
var obj = {};
console.log(validData(obj, "默认值")); //默认值
console.log(validData(obj, { name: 11 })); //{name:11}
var obj2 = true;
console.log(validData(obj2, false)); //true
```
